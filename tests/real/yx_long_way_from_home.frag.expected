/* File generated with Shader Minifier 1.1.6
 * http://www.ctrl-alt-test.fr
 */
#ifndef YX_LONG_WAY_FROM_HOME_FRAG_EXPECTED_
# define YX_LONG_WAY_FROM_HOME_FRAG_EXPECTED_
# define VAR_ICHANNEL1 "v"

const char *yx_long_way_from_home_frag =
 "#version 130\n"
 "#define iResolution gl_TexCoord[0]\n"
 "#define iTime gl_TexCoord[0].z\n"
 "#define pi acos(-1.)\n"
 "#define BOKEH 1\n"
 "#define SHADING 1\n"
 "uniform sampler2D v;"
 "mat2 n(float v)"
 "{"
   "float x=cos(v),f=sin(v);"
   "return mat2(x,-f,f,x);"
 "}"
 "float n(vec3 v,vec3 y)"
 "{"
   "vec3 f=abs(v)-y;"
   "return length(max(f,0.))+min(max(f.x,max(f.y,f.z)),0.);"
 "}"
 "float n(vec3 v,float f,float x)"
 "{"
   "vec2 m=abs(vec2(length(v.xz),v.y))-vec2(x,f);"
   "return min(max(m.x,m.y),0.)+length(max(m,0.));"
 "}"
 "vec2 s(const float v)"
 "{"
   "return fract(sin(vec2(v,v+1.))*vec2(43758.5453123));"
 "}"
 "int f;"
 "vec3 e(vec3 v)"
 "{"
   "return vec3(sin(v.z*10.)*cos(v.z*7.37)*.01,sin(atan(v.x,v.z))*.1,sin(v.x*10.)*cos(v.x*7.37)*.01);"
 "}"
 "float t(vec2 v)"
 "{"
   "vec2 f=vec2(.125,0),m=v-clamp(v,-f,f);"
   "return length(m.xy);"
 "}"
 "float h(vec2 v)"
 "{"
   "return smoothstep(.5,1.,cos(v.x*10.))*1.5+sin(v.x*100.)*.5+.5;"
 "}"
 "float m(vec3 m)"
 "{"
   "float x=1e9;"
   "x=min(x,length(m-vec3(0,5,0))-2.5);"
   "vec3 i=m;"
   "i.x=abs(i.x-1.1)-.2;"
   "float s=max(length(i.xz+vec2(0,5.))-.01,i.y-5.);"
   "vec3 n=m;"
   "if(m.y<.3)"
     "{"
       "m.y+=texture(v,m.xz*.125).x*9e-4;"
       "m.y+=texture(v,m.xz*2.*.125).x*.0011;"
       "m.y+=texture(v,m.xz*4.*.125).x*.0021;"
       "m.y+=texture(v,m.xz*4.*.0625).x*.0051;"
       "m.y+=texture(v,m.xz*4.*.03125).x*.01;"
       "m.y+=sin(m.x*2.)*.05;"
       "m.y-=length(sin(m.xz*.5))*.1;"
       "m.z+=sin(m.x*.5)*.5;"
       "m.z+=step(.5,mod(m.x,1.))*.3-.15;"
       "m.x=mod(m.x,.5)-.25;"
       "float y=t(m.xz),z=smoothstep(.1,.13,y);"
       "m.y+=.1-z*.03;"
       "m.y-=smoothstep(.05,0.,abs(y-.16))*.004;"
       "m.y-=(1.-z)*.01*h(m.xz);"
     "}"
   "m.y-=smoothstep(2.,0.,length(n.xz+vec2(-1.5,3.5)))*.2;"
   "m.y-=smoothstep(2.,0.,length(n.xz+vec2(1,-2)))*.2;"
   "float y=m.y;"
   "x=min(x,y);"
   "{"
     "vec3 c=m;"
     "c.xz=mod(c.xz-.5,1.)-.5;"
   "}"
   "m.y-=.25;"
   "f=s<x?1:0;"
   "x=min(x,s);"
   "return x*.9;"
 "}"
 "vec2 i;"
 "vec3 p(vec3 v)"
 "{"
   "vec3 f=cross(vec3(-1,-1,-1),v);"
   "return f;"
 "}"
 "vec3 e(vec3 v,float y)"
 "{"
   "v=normalize(v);"
   "vec3 f=normalize(p(v)),m=normalize(cross(v,f));"
   "vec2 n=i;"
   "n.x=n.x*2.*pi;"
   "n.y=pow(n.y,1./(y+1.));"
   "float x=sqrt(1.-n.y*n.y);"
   "return cos(n.x)*x*f+sin(n.x)*x*m+n.y*v;"
 "}"
 "vec3 x(vec3 v)"
 "{"
   "return e(v,0.);"
 "}"
 "vec3 d(vec3 v)"
 "{"
   "return e(v,1.);"
 "}"
 "vec3 l(vec3 v)"
 "{"
   "return vec3(1,2,3)*.2;"
 "}"
 "bool d(vec3 v,vec3 x,out vec3 f,out vec3 i,out float y)"
 "{"
   "float z=0.;"
   "for(int r=0;r<100;++r)"
     "{"
       "y=m(v+x*z);"
       "z+=y;"
       "if(abs(y)<.004)"
         "break;"
     "}"
   "f=v+x*z;"
   "if(abs(y)<.004)"
     "{"
       "vec2 n=vec2(.001,0);"
       "y=m(f);"
       "i=normalize(vec3(m(f+n.xyy)-y,m(f+n.yxy)-y,m(f+n.yyx)-y));"
       "return true;"
     "}"
   "return false;"
 "}"
 "vec3 d(vec3 v,float y)"
 "{"
   "v=normalize(v);"
   "vec3 f=normalize(p(v)),m=normalize(cross(v,f));"
   "vec2 n=i;"
   "n.x=n.x*2.*pi;"
   "n.y=1.-n.y*y;"
   "float x=sqrt(1.-n.y*n.y);"
   "return cos(n.x)*x*f+sin(n.x)*x*m+n.y*v;"
 "}"
 "vec3 h(vec3 v,vec3 m)"
 "{"
   "vec3 x=normalize(vec3(.3,.36,-1));"
   "const float y=1e-4;"
   "const vec3 n=vec3(1.,.6,.2)*2.;"
   "vec3 z=vec3(1),c=vec3(0);"
   "for(int r=0;r<10;++r)"
     "{"
       "vec3 a,o;"
       "float p;"
       "if(d(v,m,a,o,p))"
         "{"
           "float t=1.;"
           "vec3 g=vec3(1);"
           "if(f==1)"
             "g=vec3(.7);"
           "t*=t;"
           "{"
             "v=a+o*.002;"
             "vec3 h=reflect(m,o),u=e(o,1.);"
             "m=normalize(mix(h,u,t));"
             "z*=g;"
           "}"
           "vec3 h=d(x,y);"
           "float u=dot(o,h);"
           "vec3 b,k;"
           "float S;"
           "if(u>0.&&!d(a+o*.002,h,b,k,S))"
             "c+=z*u*n;"
           "i=s(i.y);"
         "}"
       "else"
         " if(abs(p)>.1)"
           "return c+l(m)*z;"
         "else"
           " break;"
     "}"
   "return vec3(0);"
 "}"
 "vec2 d()"
 "{"
   "vec2 v=i;"
   "if(v.y>v.x)"
     "v=1.-v;"
   "v.y*=pi*2./v.x;"
   "return v.x*vec2(cos(v.y),sin(v.y));"
 "}"
 "void main()"
 "{"
   "vec2 v=gl_FragCoord.xy/iResolution.xy-.5;"
   "float y=iTime+(v.x+iResolution.x*v.y)*1.51269341231;"
   "i=s(y);"
   "v+=(i-.5)/iResolution.xy;"
   "v.x*=iResolution.x/iResolution.y;"
   "const vec3 m=vec3(-4,2,3),f=vec3(0,0,0);"
   "const float x=distance(m,f);"
   "const vec2 z=vec2(1,2)*.015;"
   "vec3 c=vec3(0),r=normalize(vec3(v,2.));"
   "vec2 t=d();"
   "c.xy+=t*z;"
   "r.xy-=t*z*r.z/x;"
   "vec3 l=f-m;"
   "float p=-atan(l.y,length(l.xz)),o=-atan(l.x,l.z);"
   "c.yz*=n(p);"
   "r.yz*=n(p);"
   "c.xz*=n(o);"
   "r.xz*=n(o);"
   "c+=m;"
   "vec4 a=vec4(h(c,r),1);"
   "gl_FragColor=!isnan(a.x)&&a.x>=0.?a:vec4(0);"
 "}";

#endif // YX_LONG_WAY_FROM_HOME_FRAG_EXPECTED_
