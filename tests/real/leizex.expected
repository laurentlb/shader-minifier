; Generated with  (https://github.com/laurentlb/Shader_Minifier/)
_var_RESOLUTION: db 'n', 0
_var_TEX0: db 'f', 0
_var_TEX1: db 'm', 0
_var_TEX2: db 'o', 0
_var_TEX3: db 'y', 0
_var_TIME: db 'v', 0

_leizex_frag:
	db '#extension GL_EXT_gpu_shader4:enable', 10, ''
	db 'uniform vec2 n;'
	db 'uniform float v;'
	db 'uniform sampler2D f,m,o,y;'
	db 'float t(int v)'
	db '{'
	db   'v=v<<13^v;'
	db   'v=v*(v*v*15731+789221)+1376312589&2147483647;'
	db   'return float(v);'
	db '}'
	db 'float t(vec3 v,int x)'
	db '{'
	db   'ivec3 n=ivec3(floor(v));'
	db   'vec3 f=fract(v);'
	db   'f=f*f*(3.-2.*f);'
	db   'int y=n.x+n.y*57+113*n.z+x;'
	db   'float s=mix(mix(mix(t(y),t(y+1),f.x),mix(t(y+57),t(y+58),f.x),f.y),mix(mix(t(y+113),t(y+114),f.x),mix(t(y+170),t(y+171),f.x),f.y),f.z);'
	db   'return 1.-s*(1./1073741824.);'
	db '}'
	db 'vec2 s(vec3 v)'
	db '{'
	db   'ivec3 f=ivec3(floor(v));'
	db   'vec3 y=fract(v);'
	db   'vec2 n=vec2(1);'
	db   'for(int x=-1;x<=1;x++)'
	db     'for(int i=-1;i<=1;i++)'
	db       'for(int r=-1;r<=1;r++)'
	db         '{'
	db           'int c=f.x+r+57*(f.y+i)+113*(f.z+x);'
	db           'vec3 m=vec3(float(r),float(i),float(x))-y+vec3(t(c),t(c+1217),t(c+2513))/2147483647.;'
	db           'float s=dot(m,m);'
	db           'if(s<n.x)'
	db             'n.y=n.x,n.x=s;'
	db           'else if(s<n.y)'
	db             'n.y=s;'
	db         '}'
	db   'return.25*sqrt(n);'
	db '}'
	db 'float c(vec3 v)'
	db '{'
	db   'return.5*t(v,0)+.25*t(v*2.,0)+.125*t(v*4.,0)+.0625*t(v*8.,0);'
	db '}'
	db 'float c(vec3 v,out float f)'
	db '{'
	db   'vec3 y=mod(vec3(1024)+v,1.)-.5;'
	db   'float r=sqrt(dot(y,y))-.09,m=t(4.*v,0);'
	db   'r+=.8*m;'
	db   'f=clamp(-1.5*m,0.,1.);'
	db   'vec2 c=s(16.*v);'
	db   'float n=clamp(c[1]-c[0],0.,1.);'
	db   'r-=n;'
	db   'f*=clamp(n*12.,0.,1.);'
	db   'return r;'
	db '}'
	db 'vec3 x(vec3 v)'
	db '{'
	db   'float f;'
	db   'vec3 y=vec3(c(v+vec3(2e-4,0,0),f)-c(v-vec3(2e-4,0,0),f),c(v+vec3(0,2e-4,0),f)-c(v-vec3(0,2e-4,0),f),c(v+vec3(0,0,2e-4),f)-c(v-vec3(0,0,2e-4),f));'
	db   'return normalize(y);'
	db '}'
	db 'void c(out vec3 v,out vec3 f,vec2 n,float x)'
	db '{'
	db   'vec2 c=n;'
	db   'float y=c.x*c.x*.32+c.y*c.y;'
	db   'vec2 i=c*(7.-sqrt(37.5-11.5*y))/(y+1.);'
	db   'vec3 r=vec3(0,1.5,2);'
	db   'f=r+vec3(-sin(6.2831853*x/20.),.75*cos(6.2831853*x/20.+.5),-cos(6.2831853*x/20.));'
	db   'r+=.075*vec3(t(vec3(2.*x,0,.5),0),t(vec3(2.*x,.1,.4),7),t(vec3(2.*x,.2,.3),9));'
	db   'float m=.1*t(vec3(2.*x,0,0),13);'
	db   'vec3 s=normalize(r-f),o=normalize(cross(s,vec3(0,cos(m),sin(m))));'
	db   'v=normalize(i.x*o+i.y*normalize(cross(o,s))+s);'
	db '}'
	db 'vec3 s(vec3 v,vec3 y)'
	db '{'
	db   'float f=c(256.*y);'
	db   'vec3 x=vec3(c(256.*(y+vec3(5e-4,0,0)))-f,c(256.*(y+vec3(0,5e-4,0)))-f,c(256.*(y+vec3(0,0,5e-4)))-f);'
	db   'return normalize(v+x);'
	db '}'
	db 'void main()'
	db '{'
	db   'vec2 f=-1.+2.*gl_FragCoord.xy/n.xy;'
	db   'vec3 y,m;'
	db   'c(m,y,f,v);'
	db   'float r,t;'
	db   'vec3 i,o;'
	db   'for(r=.1;r<5.;)'
	db     '{'
	db       'o=y+r*m;'
	db       'float d=c(o,t);'
	db       'if(d<.001)'
	db         'break;'
	db       'r+=d*.12;'
	db     '}'
	db   'i=x(o);'
	db   'vec3 d=vec3(1.+.5*c(96.*o)),C=s(i,.25*o);'
	db   'd=d*(vec3(.5,.55,.6)+vec3(.6,.5,.3)*clamp(dot(C,vec3(.8,.5,-.1)),0.,1.)*3.)*t;'
	db   'd=d/(1.+r)+vec3(1.06,1.14,1)*(1.-exp2(-.25*r));'
	db   'd=(d*d+d)*.5;'
	db   'd=clamp(d*vec3(1,1.2,1),0.,1.);'
	db   'd*=.5+.5*(1.-f.x)*(1.+f.x);'
	db   'gl_FragColor=vec4(d,1);'
	db '}', 0
