; Generated with  (https://github.com/laurentlb/Shader_Minifier/)
_var_RESOLUTION: db 'n', 0
_var_TEX0: db 'f', 0
_var_TEX1: db 'm', 0
_var_TEX2: db 'o', 0
_var_TEX3: db 'y', 0
_var_TIME: db 'v', 0

_leizex_frag:
	db '#extension GL_EXT_gpu_shader4:enable', 10, ''
	db 'uniform vec2 n;'
	db 'uniform float v;'
	db 'uniform sampler2D f,m,o,y;'
	db 'float t(int v)'
	db '{'
	db   'v^=v<<13;'
	db   'v=v*(v*v*15731+789221)+1376312589&2147483647;'
	db   'return float(v);'
	db '}'
	db 'float t(vec3 v,int f)'
	db '{'
	db   'ivec3 n=ivec3(floor(v));'
	db   'vec3 c=fract(v);'
	db   'c=c*c*(3.-2.*c);'
	db   'f+=n.x+n.y*57+113*n.z;'
	db   'float y=mix(mix(mix(t(f),t(f+1),c.x),mix(t(f+57),t(f+58),c.x),c.y),mix(mix(t(f+113),t(f+114),c.x),mix(t(f+170),t(f+171),c.x),c.y),c.z);'
	db   'return 1.-y*(1./1073741824.);'
	db '}'
	db 'vec2 t(vec3 v)'
	db '{'
	db   'ivec3 c=ivec3(floor(v));'
	db   'vec3 f=fract(v);'
	db   'vec2 n=vec2(1);'
	db   'for(int v=-1;v<=1;v++)'
	db     'for(int x=-1;x<=1;x++)'
	db       'for(int y=-1;y<=1;y++)'
	db         '{'
	db           'int i=c.x+y+57*(c.y+x)+113*(c.z+v);'
	db           'vec3 m=vec3(float(y),float(x),float(v))-f+vec3(t(i),t(i+1217),t(i+2513))/2147483647.;'
	db           'float s=dot(m,m);'
	db           'if(s<n.x)'
	db             'n.y=n.x,n.x=s;'
	db           'else if(s<n.y)'
	db             'n.y=s;'
	db         '}'
	db   'return.25*sqrt(n);'
	db '}'
	db 'float c(vec3 v)'
	db '{'
	db   'return.5*t(v,0)+.25*t(v*2.,0)+.125*t(v*4.,0)+.0625*t(v*8.,0);'
	db '}'
	db 'float c(vec3 v,out float f)'
	db '{'
	db   'vec3 c=mod(vec3(1024)+v,1.)-.5;'
	db   'float y=sqrt(dot(c,c))-.09,m=t(4.*v,0);'
	db   'y+=.8*m;'
	db   'f=clamp(-1.5*m,0.,1.);'
	db   'vec2 i=t(16.*v);'
	db   'm=clamp(i[1]-i[0],0.,1.);'
	db   'y-=m;'
	db   'f*=clamp(m*12.,0.,1.);'
	db   'return y;'
	db '}'
	db 'vec3 s(vec3 v)'
	db '{'
	db   'float y;'
	db   'vec3 f=vec3(c(v+vec3(2e-4,0,0),y)-c(v-vec3(2e-4,0,0),y),c(v+vec3(0,2e-4,0),y)-c(v-vec3(0,2e-4,0),y),c(v+vec3(0,0,2e-4),y)-c(v-vec3(0,0,2e-4),y));'
	db   'return normalize(f);'
	db '}'
	db 'void c(out vec3 f,out vec3 y,vec2 c)'
	db '{'
	db   'float m=v;'
	db   'vec2 n=c;'
	db   'float i=n.x*n.x*.32+n.y*n.y;'
	db   'n=n*(7.-sqrt(37.5-11.5*i))/(i+1.);'
	db   'vec3 x=vec3(0,1.5,2);'
	db   'y=x+vec3(-sin(6.2831853*m/20.),.75*cos(6.2831853*m/20.+.5),-cos(6.2831853*m/20.));'
	db   'x+=.075*vec3(t(vec3(2.*m,0,.5),0),t(vec3(2.*m,.1,.4),7),t(vec3(2.*m,.2,.3),9));'
	db   'i=.1*t(vec3(2.*m,0,0),13);'
	db   'x=normalize(x-y);'
	db   'vec3 s=normalize(cross(x,vec3(0,cos(i),sin(i))));'
	db   'f=normalize(n.x*s+n.y*normalize(cross(s,x))+x);'
	db '}'
	db 'vec3 c(vec3 v,vec3 f)'
	db '{'
	db   'float y=c(256.*f);'
	db   'return normalize(v+vec3(c(256.*(f+vec3(5e-4,0,0)))-y,c(256.*(f+vec3(0,5e-4,0)))-y,c(256.*(f+vec3(0,0,5e-4)))-y));'
	db '}'
	db 'void main()'
	db '{'
	db   'vec2 v=-1.+2.*gl_FragCoord.xy/n.xy;'
	db   'vec3 f,m;'
	db   'c(m,f,v);'
	db   'float y,x;'
	db   'vec3 i,t;'
	db   'for(y=.1;y<5.;)'
	db     '{'
	db       't=f+y*m;'
	db       'float v=c(t,x);'
	db       'if(v<.001)'
	db         'break;'
	db       'y+=v*.12;'
	db     '}'
	db   'i=s(t);'
	db   'f=vec3(1.+.5*c(96.*t));'
	db   'i=c(i,.25*t);'
	db   'f=f*(vec3(.5,.55,.6)+vec3(.6,.5,.3)*clamp(dot(i,vec3(.8,.5,-.1)),0.,1.)*3.)*x/(1.+y)+vec3(1.06,1.14,1)*(1.-exp2(-.25*y));'
	db   'f=clamp((f*f+f)*.5*vec3(1,1.2,1),0.,1.)*(.5+.5*(1.-v.x)*(1.+v.x));'
	db   'gl_FragColor=vec4(f,1);'
	db '}', 0
