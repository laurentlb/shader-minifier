uniform vec2 v;uniform float s;uniform sampler2D y,c,C,D;float n(vec3 v){float s=(sin(v.x)+v.y*.25)*.35;v=vec3(cos(s)*v.x-sin(s)*v.y,sin(s)*v.x+cos(s)*v.y,v.z);return dot(cos(v)*cos(v),vec3(1))-1.2;}vec3 m(vec3 v){vec3 m=vec3(sin(s*1.5)*.5,cos(s)*.5,s);float y=0.,c,f;for(int s=0;s<75;s++){if(n(m+v*y)<0.){c=y-.125;f=y;for(int s=0;s<10;s++){y=(c+f)*.5;if(n(m+v*y)<0.)f=y;else c=y;}vec3 s=vec3(.1,0,0),i=m+v*y;s=-normalize(vec3(n(i+s),n(i+s.yxy),n(i+s.yyx))+vec3(sin(i*75.))*.01);return vec3(mix((max(-dot(s,vec3(.577)),0.)+.125*max(-dot(s,vec3(-.707,-.707,0)),0.))*(mod(length(i.xy)*20.,2.)<1.?vec3(.71,.85,.25):vec3(.79,.93,.4)),vec3(.93,.94,.85),vec3(pow(y/9.,5.))));}y+=.125;}return vec3(.93,.94,.85);}void main(){vec2 s=-1.+2.*gl_FragCoord.xy/v.xy;gl_FragColor=vec4(m(normalize(vec3(s.xy,1))),1);}
