/* File generated with Shader Minifier 1.1.6
 * http://www.ctrl-alt-test.fr
 */
#ifndef MANDELBULB_EXPECTED_
# define MANDELBULB_EXPECTED_

const char *mandelbulb_frag =
 "uniform vec2 resolution;"
 "uniform float time;"
 "bool f(in vec4 v,in vec3 f,in vec3 o,out vec2 i)"
 "{"
   "vec3 y=f-v.xyz;"
   "float c=dot(y,o),e=dot(y,y)-v.w*v.w,x=c*c-e;"
   "if(x<0.)"
     "return false;"
   "float t=sqrt(x);"
   "i.x=-c-t;"
   "i.y=-c+t;"
   "return true;"
 "}"
 "const int e=7;"
 "const float v=100.;"
 "bool f(in vec3 f,out float i,out vec4 y)"
 "{"
   "vec4 c=vec4(100.);"
   "vec3 x=f;"
   "float o=dot(x,x);"
   "if(o>v)"
     "return i=.5*log(o)/pow(8.,0.),y=vec4(1.),false;"
   "for(int t=1;t<e;t++)"
     "{"
       "\n#if 0\n"
       "float z=sqrt(dot(x,x)),s=acos(x.y/z),n=atan(x.x,x.z);"
       "z=pow(z,8.);"
       "s=s*8.;"
       "n=n*8.;"
       "x=f+z*vec3(sin(s)*sin(n),cos(s),sin(s)*cos(n));"
       "\n#else\n"
       "float d=x.x,m=d*d,p=m*m,l=x.y,a=l*l,r=a*a,w=x.z,g=w*w,u=g*g,q=m+g,b=inversesqrt(q*q*q*q*q*q*q),F=p+r+u-6.*a*g-6.*m*a+2.*g*m,C=m-a+g;"
       "x.x=f.x+64.*d*l*w*(m-g)*C*(p-6.*m*g+u)*F*b;"
       "x.y=f.y+-16.*a*q*C*C+F*F;"
       "x.z=f.z+-8.*l*C*(p*p-28.*p*m*g+70.*p*u-28.*m*g*u+u*u)*F*b;"
       "\n#endif\n"
       "o=dot(x,x);"
       "c=min(c,vec4(x.xyz*x.xyz,o));"
       "if(o>v)"
         "return y=c,i=.5*log(o)/pow(8.,float(t)),false;"
     "}"
   "y=c;"
   "i=0.;"
   "return true;"
 "}"
 "bool f(in vec3 v,in vec3 x,out float y,in float e,out vec3 o,out vec4 i,float q)"
 "{"
   "vec4 c=vec4(0.,0.,0.,1.25);"
   "vec2 s;"
   "if(!f(c,v,x,s))"
     "return false;"
   "if(s.y<.001)"
     "return false;"
   "if(s.x<.001)"
     "s.x=.001;"
   "if(s.y>e)"
     "s.y=e;"
   "float t;"
   "vec3 z;"
   "vec4 n;"
   "float m=1./sqrt(1.+q*q);"
   "for(float g=s.x;g<s.y;)"
     "{"
       "vec3 p=v+x*g;"
       "float d=clamp(.001*g*m,1e-6,.005),l=d*.1;"
       "vec4 u;"
       "float a;"
       "if(f(p,a,n))"
         "return y=g,o=normalize(z),i=n,true;"
       "float w;"
       "f(p+vec3(l,0.,0.),w,u);"
       "float b;"
       "f(p+vec3(0.,l,0.),b,u);"
       "float r;"
       "f(p+vec3(0.,0.,l),r,u);"
       "z=vec3(w-a,b-a,r-a);"
       "t=.5*a*l/length(z);"
       "if(t<d)"
         "return i=n,o=normalize(z),y=g,true;"
       "g+=t;"
     "}"
   "return false;"
 "}"
 "void main()"
 "{"
   "vec2 v=-1.+2.*gl_FragCoord.xy/resolution.xy,x=v*vec2(1.33,1.);"
   "vec3 y=vec3(.577,.577,.577),o=vec3(-.707,0.,.707);"
   "float i=1.,s=1.4+.2*cos(6.28318*time/20.);"
   "vec3 c=vec3(s*sin(6.28318*time/20.),.3-.4*sin(6.28318*time/20.),s*cos(6.28318*time/20.)),p=vec3(0.,.1,0.),l=normalize(p-c),u=vec3(0.,1.,0.),g=normalize(cross(l,u)),m=normalize(cross(g,l)),e=normalize(x.x*g+x.y*m+1.5*l),a,z;"
   "vec4 t;"
   "float q;"
   "if(!f(c,e,q,1e20,a,t,i))"
     "z=1.3*vec3(1.,.98,.9)*(.7+.3*e.y);"
   "else"
     "{"
       "vec3 n=c+q*e;"
       "float d=clamp(.2+.8*dot(y,a),0.,1.);"
       "d=d*d;"
       "float C=clamp(.3+.7*dot(o,a),0.,1.),w=clamp(1.25*t.w-.4,0.,1.);"
       "w=w*w*.5+.5*w;"
       "float b;"
       "vec3 r;"
       "vec4 F;"
       "if(d>.001)"
         "if(f(n,y,b,1e20,r,F,i))"
           "d=.1;"
       "z=vec3(1.,1.,1.);"
       "z=mix(z,vec3(.8,.6,.2),sqrt(t.x)*1.25);"
       "z=mix(z,vec3(.8,.3,.3),sqrt(t.y)*1.25);"
       "z=mix(z,vec3(.7,.4,.3),sqrt(t.z)*1.25);"
       "z*=(.5+.5*a.y)*vec3(.14,.15,.16)*.8+d*vec3(1.,.85,.4)+.5*C*vec3(.08,.1,.14);"
       "z*=vec3(pow(w,.8),pow(w,1.),pow(w,1.1));"
       "z=1.5*(z*.15+.85*sqrt(z));"
     "}"
   "vec2 d=v*.5+.5;"
   "z*=.7+4.8*d.x*d.y*(1.-d.x)*(1.-d.y);"
   "z=clamp(z,0.,1.);"
   "gl_FragColor=vec4(z,1.);"
 "}";

#endif // MANDELBULB_EXPECTED_
