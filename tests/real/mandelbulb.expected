/* File generated with 
 * http://www.ctrl-alt-test.fr
 */
#ifndef MANDELBULB_EXPECTED_
# define MANDELBULB_EXPECTED_

const char *mandelbulb_frag =
 "uniform vec2 resolution;"
 "uniform float time;"
 "bool t(vec4 v,vec3 f,vec3 t,out vec2 i)"
 "{"
   "vec3 y=f-v.xyz;"
   "float c=dot(y,t),o=dot(y,y)-v.w*v.w,x=c*c-o,e;"
   "if(x<0.)"
     "return false;"
   "e=sqrt(x);"
   "i.x=-c-e;"
   "i.y=-c+e;"
   "return true;"
 "}"
 "bool t(vec3 v,out float f,out vec4 y)"
 "{"
   "vec4 e=vec4(100);"
   "vec3 i=v;"
   "float x=dot(i,i);"
   "if(x>1e2)"
     "return f=.5*log(x)/pow(8.,0.),y=vec4(1),false;"
   "for(int t=1;t<7;t++)"
     "{"
       "\n#if 0\n"
       "float z=sqrt(dot(i,i)),o=acos(i.y/z),c=atan(i.x,i.z);"
       "z=pow(z,8.);"
       "o*=8.;"
       "c*=8.;"
       "i=v+z*vec3(sin(o)*sin(c),cos(o),sin(o)*cos(c));"
       "\n#else\n"
       "float s=i.x,d=s*s,n=d*d,m=i.y,l=m*m,p=i.z,w=p*p,r=w*w,g=d+w,a=inversesqrt(g*g*g*g*g*g*g),u=n+l*l+r-6.*l*w-6.*d*l+2.*w*d,q=d-l+w;"
       "i.x=v.x+64.*s*m*p*(d-w)*q*(n-6.*d*w+r)*u*a;"
       "i.y=v.y+-16.*l*g*q*q+u*u;"
       "i.z=v.z+-8.*m*q*(n*n-28.*n*d*w+70.*n*r-28.*d*w*r+r*r)*u*a;"
       "\n#endif\n"
       "x=dot(i,i);"
       "e=min(e,vec4(i.xyz*i.xyz,x));"
       "if(x>1e2)"
         "return y=e,f=.5*log(x)/pow(8.,float(t)),false;"
     "}"
   "y=e;"
   "f=0.;"
   "return true;"
 "}"
 "bool t(vec3 v,vec3 f,out float y,float e,out vec3 o,out vec4 i,float g)"
 "{"
   "vec4 x=vec4(0,0,0,1.25),c;"
   "vec2 n;"
   "if(!t(x,v,f,n))"
     "return false;"
   "if(n.y<.001)"
     "return false;"
   "if(n.x<.001)"
     "n.x=.001;"
   "if(n.y>e)"
     "n.y=e;"
   "float d,s;"
   "vec3 z;"
   "s=1./sqrt(1.+g*g);"
   "for(float w=n.x;w<n.y;)"
     "{"
       "vec3 r=v+f*w;"
       "float m=clamp(.001*w*s,1e-6,.005),l=m*.1,p,a,u,q;"
       "vec4 b;"
       "if(t(r,p,c))"
         "return y=w,o=normalize(z),i=c,true;"
       "t(r+vec3(l,0,0),a,b);"
       "t(r+vec3(0,l,0),u,b);"
       "t(r+vec3(0,0,l),q,b);"
       "z=vec3(a-p,u-p,q-p);"
       "d=.5*p*l/length(z);"
       "if(d<m)"
         "return i=c,o=normalize(z),y=w,true;"
       "w+=d;"
     "}"
   "return false;"
 "}"
 "void main()"
 "{"
   "vec2 v=-1.+2.*gl_FragCoord.xy/resolution.xy,i=v*vec2(1.33,1),e;"
   "vec3 f=vec3(.577),o=vec3(-.707,0,.707),c,y,x,z,w,l,s,n,r;"
   "float p=1.,d=1.4+.2*cos(6.28318*time/20.),u;"
   "c=vec3(d*sin(6.28318*time/20.),.3-.4*sin(6.28318*time/20.),d*cos(6.28318*time/20.));"
   "y=vec3(0,.1,0);"
   "x=normalize(y-c);"
   "z=vec3(0,1,0);"
   "w=normalize(cross(x,z));"
   "l=normalize(cross(w,x));"
   "s=normalize(i.x*w+i.y*l+1.5*x);"
   "vec4 g;"
   "if(!t(c,s,u,1e20,n,g,p))"
     "r=1.3*vec3(1,.98,.9)*(.7+.3*s.y);"
   "else"
     "{"
       "vec3 m=c+u*s,a;"
       "float q=clamp(.2+.8*dot(f,n),0.,1.),b,F,C;"
       "q*=q;"
       "b=clamp(.3+.7*dot(o,n),0.,1.);"
       "F=clamp(1.25*g.w-.4,0.,1.);"
       "F=F*F*.5+.5*F;"
       "vec4 h;"
       "if(q>.001)"
         "if(t(m,f,C,1e20,a,h,p))"
           "q=.1;"
       "r=vec3(1);"
       "r=mix(r,vec3(.8,.6,.2),sqrt(g.x)*1.25);"
       "r=mix(r,vec3(.8,.3,.3),sqrt(g.y)*1.25);"
       "r=mix(r,vec3(.7,.4,.3),sqrt(g.z)*1.25);"
       "r*=(.5+.5*n.y)*vec3(.14,.15,.16)*.8+q*vec3(1,.85,.4)+.5*b*vec3(.08,.1,.14);"
       "r*=vec3(pow(F,.8),pow(F,1.),pow(F,1.1));"
       "r=1.5*(r*.15+.85*sqrt(r));"
     "}"
   "e=v*.5+.5;"
   "r*=.7+4.8*e.x*e.y*(1.-e.x)*(1.-e.y);"
   "r=clamp(r,0.,1.);"
   "gl_FragColor=vec4(r,1);"
 "}";

#endif // MANDELBULB_EXPECTED_
