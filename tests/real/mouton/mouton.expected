// Generated with  (https://github.com/laurentlb/Shader_Minifier/)
#ifndef MOUTON_EXPECTED_
# define MOUTON_EXPECTED_
# define VAR_a_position "v"
# define VAR_animationAmp "i"
# define VAR_animationSpeed "f"
# define VAR_anvilPos "z"
# define VAR_blink "d"
# define VAR_camFocal "o"
# define VAR_camPos "c"
# define VAR_camTa "l"
# define VAR_excited "n"
# define VAR_eyeDir "a"
# define VAR_eyesSurprise "p"
# define VAR_fishEyeFactor "u"
# define VAR_flowerPos "s"
# define VAR_fragColor "U"
# define VAR_headRot "e"
# define VAR_iTime "t"
# define VAR_noseSize "w"
# define VAR_panelPos "y"
# define VAR_panelWarningPos "x"
# define VAR_sheepPos "m"
# define VAR_sunDir "r"
# define VAR_tex "O"

const char *mouton_vert =
 "#version 150\n"
 "in vec4 v;"
 "out vec3 i,f,m,s,y,x,z,r,c,l,a;"
 "out vec2 e,n;"
 "out float d,o,p,u,w;"
 "uniform float t;"
 "void main()"
 "{"
   "gl_Position=v;"
   "float g=t;"
   "m=vec3(0);"
   "y=vec3(9e7);"
   "s=vec3(9e7);"
   "x=vec3(9e7);"
   "z=vec3(9e7);"
   "o=2.;"
   "d=max(fract(t*.333),fract(t*.123+.1));"
   "n=vec2(0);"
   "r=normalize(vec3(3.5,1,-1));"
   "f=vec3(1);"
   "u=0.;"
   "e=vec2(0);"
   "w=1.;"
   "p=0.;"
   "if(g<7.5)"
     "i=vec3(1,.2,1),f=vec3(1,1,.5),a=vec3(0,.45,1),e.y=.25,o=4.,c=vec3(0,2.5,-3.7),l=vec3(0,3,0);"
   "else if(g<14.5)"
     "i=vec3(1,.2,.25),f=vec3(1,1,2),a=vec3(0,.5,1),e.y=.25,o=4.,c=vec3(5,.5,0),l=vec3(0,.5,1);"
   "else if(g<29.5)"
     "{"
       "float v=g-14.5;"
       "i=vec3(1,.2,.25);"
       "f=vec3(1,1,2);"
       "a=vec3(0,.5,1);"
       "e.y=.25;"
       "c=vec3(5.+v*.5,2,v*.5);"
       "l=vec3(0,2,0);"
     "}"
   "else if(g<44.)"
     "{"
       "float v=g-29.;"
       "i=vec3(1,.2,.25);"
       "f=vec3(1,1,2);"
       "a=vec3(0,.5,1);"
       "e.y=.25;"
       "float y=v*.35+2.5;"
       "r=normalize(vec3(cos(y),sin(y),-.3));"
       "o=1.5;"
       "c=vec3(22,2,v*.6-10.);"
       "l=vec3(0,2,v*.6-10.);"
     "}"
   "else if(g<52.)"
     "{"
       "float v=g-44.,x=smoothstep(5.,5.5,v);"
       "e.y=mix(.25,0.,x);"
       "i=vec3(1.-x,.2*(1.-x),1);"
       "f=vec3(1,1,.5);"
       "a=vec3(x*.3,.3-x*.3,1);"
       "p=smoothstep(7.4,7.6,v)*.2;"
       "o=4.;"
       "c=vec3(0,3,-4);"
       "l=vec3(0,3,0);"
       "if(v>3.)"
         "d=max(fract(t*.333),fract(t*.333+.08));"
     "}"
   "else if(g<54.8)"
     "{"
       "y=vec3(-5,0,-8);"
       "m=vec3(9e7);"
       "a=vec3(.3,0,1);"
       "p=.2;"
       "float v=smoothstep(0.,.5,g-52.);"
       "o=mix(4.,3.,v);"
       "c=vec3(0,3,-4);"
       "l=mix(vec3(0,3,0),vec3(-5,5,-9),v);"
     "}"
   "else if(g<60.)"
     "{"
       "float v=g-55.;"
       "n.x=smoothstep(0.,.5,v);"
       "i=vec3(0);"
       "d=0.;"
       "a=vec3(.3,0,1);"
       "c=mix(vec3(0,3,-4),vec3(0,2,-6),n.x);"
       "l=vec3(0,3,0);"
       "o=mix(4.,3.,n.x)+smoothstep(0.,5.,v);"
     "}"
   "else if(g<65.)"
     "{"
       "float v=g-60.;"
       "a=vec3(0,0,1);"
       "m=vec3(0,0,-v*3.-2.);"
       "y=vec3(-5,0,-8);"
       "i=vec3(1,1,.5);"
       "f=vec3(3,1.5,8)*1.5;"
       "c=vec3(16,5,9);"
       "l=vec3(3,5,-2.-v);"
       "o=3.;"
     "}"
   "else if(g<73.)"
     "{"
       "float v=g-65.;"
       "i=vec3(1);"
       "f=vec3(3,1.5,8);"
       "float x=mod(v,8.);"
       "a=vec3(smoothstep(.5,1.,x)*smoothstep(2.8,2.5,x)-smoothstep(4.,4.5,x)*smoothstep(5.8,5.5,x)+cos(t)*.2,cos(t*.5)*.1+.1,1);"
       "u=.3;"
       "o=2.5;"
       "c=vec3(2.75,1,-5.25);"
       "l=vec3(0,2.3,0);"
       "x=mod(v,2.);"
       "w+=smoothstep(.5,.6,x)*smoothstep(.7,.6,x)*.3;"
       "x=mod(v+.3,3.);"
       "w+=smoothstep(.5,.6,x)*smoothstep(.7,.6,x)*.3;"
     "}"
   "else if(g<76.)"
     "{"
       "float v=g-73.,x=smoothstep(1.,3.,v);"
       "i=vec3(0,1.-x*.5,1);"
       "f=vec3(3,1.5,6);"
       "a=vec3(x*.5,.3-x*.45,1);"
       "o=4.;"
       "c=vec3(0,3,-4);"
       "l=vec3(0,3,0);"
       "if(v>3.)"
         "d=max(fract(t*.333),fract(t*.333+.08));"
     "}"
   "else if(g<81.25)"
     "{"
       "x=vec3(-5,0,-8);"
       "a=vec3(.5,-.15,1);"
       "i=vec3(0,.5,1);"
       "f=vec3(3,1.5,6);"
       "float v=smoothstep(0.,1.,g-76.);"
       "o=mix(4.,3.,v);"
       "c=vec3(0,3,-4);"
       "l=mix(vec3(0,3,0),vec3(-5,5,-9),v);"
     "}"
   "else if(g<88.)"
     "{"
       "float v=g-81.25;"
       "m=vec3(0,0,-11);"
       "x=vec3(-5,0,-8);"
       "a=normalize(mix(vec3(1,-.5,1),vec3(0,.5,1),smoothstep(2.8,3.2,v)));"
       "a=mix(a,vec3(1,-.5,1),smoothstep(6.,6.5,v));"
       "e.y=smoothstep(3.,3.5,v)*.6;"
       "e.x=smoothstep(3.,3.5,v)*smoothstep(7.,5.,v)*.25*sin(v*3.);"
       "i=vec3(1,.2,.5);"
       "f=vec3(0,.2,1);"
       "c=vec3(-3,4.8,-30);"
       "l=vec3(-3,4,0);"
       "o=3.5;"
     "}"
   "else if(g<96.)"
     "{"
       "float v=g-87.,y=smoothstep(6.,9.,v);"
       "m=vec3(0,0,v*.25-11.);"
       "x=vec3(-2,0,-8);"
       "a=vec3(-.5,.25-y,1);"
       "e.y=.5-y;"
       "i=vec3(1,.2,.5);"
       "f=vec3(-1,1,1)*.5;"
       "c=vec3(18,5,-5);"
       "l=vec3(-5,5,-6);"
       "o=3.;"
     "}"
   "else if(g<102.)"
     "{"
       "float v=g-96.;"
       "i=vec3(0);"
       "f=vec3(0);"
       "x=vec3(0,0,-8);"
       "l=mod(v,3.)<1.5?"
         "d=0.,c=vec3(0,2,-8),vec3(0,3,0):"
         "(c=vec3(0,5.5,2),vec3(0,5.75,0));"
       "a=vec3(0,-.1,1);"
       "o=3.+v*.1;"
     "}"
   "else if(g<110.)"
     "{"
       "float v=g-103.5,s=sin(min(v,5.));"
       "i=vec3(0);"
       "f=vec3(0);"
       "a=normalize(vec3(s*.7,0,1));"
       "a=mix(a,vec3(-.3,.2,1),smoothstep(5.2,5.4,v));"
       "e.x=s*.25;"
       "p=smoothstep(6.,6.2,v)*.2;"
       "m=vec3(0,(smoothstep(6.,6.2,v)-smoothstep(6.2,6.4,v))*.4,0);"
       "o=3.5;"
       "c=vec3(0,2,-8);"
       "l=vec3(0,3,0);"
     "}"
   "else if(g<112.)"
     "{"
       "m=vec3(9e7);"
       "x=vec3(-2,0,-8);"
       "s=vec3(5,0,-20);"
       "float v=smoothstep(.5,1.,g-110.);"
       "o=mix(3.,4.,v);"
       "c=vec3(0,5.5,2);"
       "l=mix(vec3(-.5,5.75,0),vec3(5,2,-20),v);"
       "n.x=v*.3;"
     "}"
   "else if(g<117.8)"
     "{"
       "float v=(g-112.)*1.2;"
       "i=vec3(.1);"
       "f=vec3(.2);"
       "o=2.8+v*.15;"
       "int m=int(v);"
       "if(m%4==1)"
         "x=vec3(0,0,-8),c=vec3(2.5,2,-1),l=vec3(1,5.25,-8),o=2.8+pow(v*.3,1.2);"
       "else if(m%4==3)"
         "s=vec3(4,0,-8),c=vec3(0,5.5,2),l=vec3(4,3,-8),n.x=.3+.2/12.,n.y=v/12.;"
       "else"
         " c=vec3(0,2.4,-8),l=vec3(0,3,0);"
       "float y=smoothstep(.3,.7,fract(v));"
       "if(m%4==0)"
         "y=1.-y;"
       "e.x=-y*.1;"
       "a=normalize(mix(vec3(.1,-.25,1),vec3(-.2,.2,1),y));"
       "a+=vec3(cos(v*10.),cos(v*5.),1)*.01;"
     "}"
   "else if(g<121.8)"
     "{"
       "float v=g-118.;"
       "m=vec3(9e7);"
       "x=vec3(-2,0,-8);"
       "s=vec3(5,0,-20);"
       "o=9.+v*.2;"
       "c=vec3(0,5.5,2);"
       "l=vec3(5,2,-20);"
       "n.x=.4;"
       "n.y=v;"
     "}"
   "else if(g<125.)"
     "{"
       "float v=g-120.;"
       "i=vec3(0,.1,0);"
       "f=vec3(0,.5,0);"
       "c=vec3(0,2.4,-8);"
       "l=vec3(0,3,0);"
       "e.x=-.1;"
       "e.y=sin(v*2.)*.1;"
       "p=smoothstep(0.,3.,v)*.1;"
       "a=vec3(-.2,.2,1);"
       "o=3.2-v*.15;"
       "n.x=.1;"
       "n.y=5.;"
     "}"
   "else if(g<137.)"
     "{"
       "float v=g-125.;"
       "a=vec3(0,0,1);"
       "m=vec3(0,0,-v*2.+2.);"
       "s=vec3(0,-.5,-30);"
       "i=vec3(1,1,.5);"
       "f=vec3(3,1.5,8);"
       "c=vec3(-2,3.5,mix(-10.,-33.,smoothstep(0.,10.,v)));"
       "l=vec3(2,2,-3.-v*2.);"
       "o=3.;"
     "}"
   "else if(g<142.)"
     "{"
       "float v=g-137.2;"
       "a=vec3(0,0,1);"
       "m=vec3(0,(1.-smoothstep(.3,.25,v))*-4.8,-22.-v*2.);"
       "s=vec3(2,0,-30);"
       "i=vec3(1,1,.5);"
       "f=vec3(3,1.5,8);"
       "c=vec3(-20,6,-13)+vec3(cos(v*72.),cos(v*64.),sin(v*48.))*3.*smoothstep(.3,.31,v)*smoothstep(.7,.1,v);"
       "l=vec3(3,2,-23);"
       "o=mix(4.,4.2,smoothstep(0.,5.,v));"
       "z=vec3(0,smoothstep(.3,.2,v)*13.,-22);"
     "}"
   "else"
     " a=vec3(0,0,1),m=vec3(9e7),x=vec3(-1,0,-8),s=vec3(1,0,-25),l=vec3(2,3.6,-18),c=vec3(5,5,2),o=2.5+smoothstep(1.7,2.2,g-143.)*4.2,z=vec3(7,0,-20);"
   "a=normalize(a);"
 "}";

const char *mouton_frag =
 "#version 150\n"
 "out vec4 U;"
 "const vec2 g=vec2(1920,1080);"
 "in vec3 i,f,m,s,y,x,z,r,c,l,a;"
 "in vec2 e,n;"
 "in float d,o,p,u,w;"
 "uniform float t;"
 "const float C=acos(-1.);"
 "float D=0.;"
 "vec2 h(vec2 i,vec2 v)"
 "{"
   "return i.x<v.x?"
     "i:"
     "v;"
 "}"
 "float h(vec3 v,vec3 i,float x)"
 "{"
   "float y=max(dot(v,normalize(i+v)),0.),m=2e3/x;"
   "x=3./x;"
   "return(pow(y,m)*(m+2.)+pow(y,x)*(x+2.)*2.)*.008;"
 "}"
 "vec3 h(vec3 v)"
 "{"
   "uvec3 i=uvec3((v+1e2)*1e4);"
   "i=(i>>8U^i.yzx)*1103515245U;"
   "i=(i>>8U^i.yzx)*1103515245U;"
   "i=(i>>8U^i.yzx)*1103515245U;"
   "return vec3(i)*(1./float(-1U));"
 "}"
 "float B(vec3 v)"
 "{"
   "vec3 i=floor(v);"
   "v=fract(v);"
   "v=v*v*v*(v*(v*6.-15.)+10.);"
   "return mix(mix(mix(h(i+vec3(0)).x,h(i+vec3(1,0,0)).x,v.x),mix(h(i+vec3(0,1,0)).x,h(i+vec3(1,1,0)).x,v.x),v.y),mix(mix(h(i+vec3(0,0,1)).x,h(i+vec3(1,0,1)).x,v.x),mix(h(i+vec3(0,1,1)).x,h(i+vec3(1)).x,v.x),v.y),v.z)*2.-1.;"
 "}"
 "vec2 A(vec3 v)"
 "{"
   "v.xz-=z.xz;"
   "v.y-=-z.y;"
   "float y=v.y+smoothstep(1.,20.,length(v.xz));"
   "return y<.4?"
     "y-=pow((B(v*.9)*.5+B(v*1.6)*.3+B(v*2.7)*.1)*.5+.5,3.)*.45*(1.-exp((-t+137.3)*3.)),vec2(y,12):"
     "vec2(9e7,0);"
 "}"
 "mat3 E(vec3 v)"
 "{"
   "v=normalize(l-v);"
   "vec3 i=normalize(cross(v,normalize(vec3(0,1,0))));"
   "return mat3(i,cross(i,v),v);"
 "}"
 "mat2 F(float v)"
 "{"
   "float x=cos(v);"
   "v=sin(v);"
   "return mat2(x,v,-v,x);"
 "}"
 "vec3 A(vec3 v,vec2 i,float x)"
 "{"
   "vec2 y=vec2(cos(t*.7+2.),sin(t*.7+2.)*.75);"
   "float z=smoothstep(.151,.15,length(i-y));"
   "vec2 m=F(t*2e-4)*i*2e2,f=floor(m);"
   "v=h(vec3(abs(f),abs(f.x)));"
   "float c=v.z*.06;"
   "return z*smoothstep(.13,.2701,length(i-y-vec2(.05))+.004*B(1e2*vec3(i-y,0)))*vec3(1,.9,.1)*smoothstep(.5,-1.,r.y)+smoothstep(c,c*.01,length(fract(m)-.5+(v.xy-.5)))*(1.-z)+exp(-length(i-y)*2.)*.1+pow(x,2.);"
 "}"
 "float A(vec3 v,vec3 x)"
 "{"
   "v=abs(v)-x;"
   "return length(max(v,0.))+min(max(v.x,max(v.y,v.z)),0.);"
 "}"
 "vec2 G(vec3 v)"
 "{"
   "v-=z;"
   "v.xz=F(1.)*v.xz;"
   "float i=pow(clamp(v.y-1.,.004,1.),.5);"
   "i=A(v-vec3(0,1,0),vec3(1.5-i,1,2.5-i));"
   "if(i<10.)"
     "{"
       "i=min(i,A(v-vec3(0,3,0),vec3(2,1,3)));"
       "float x=max(max(length((v.yz-vec2(4.5,3))*vec2(1,.8))-2.,abs(v.x)-.5),v.y-3.5);"
       "i=min(i,x);"
       "return vec2(i-.1,11);"
     "}"
   "return vec2(9e7,0);"
 "}"
 "vec2 H(vec3 v)"
 "{"
   "v-=y;"
   "float i=A(v-vec3(0,7.5,-5),vec3(.8,.8,.1))-.2;"
   "if(i<7.)"
     "{"
       "i=max(i,abs(v.z+5.)-.1);"
       "float x=A(v-vec3(0,4,-5.1),vec3(.11,4,.08));"
       "return h(vec2(x,5),vec2(i,7));"
     "}"
   "return vec2(9e7,0);"
 "}"
 "float A(vec3 v,float x,float i,float y)"
 "{"
   "vec2 m=vec2(length(v.xz),v.y),c=vec2(y,x),f=vec2(y-i,2.*x),l=vec2(m.x-min(m.x,m.y<0.?"
     "i:"
     "y),abs(m.y)-x);"
   "f=m-c+f*clamp(dot(c-m,f)/dot(f,f),0.,1.);"
   "return(f.x<0.&&l.y<0.?"
     "-1.:"
     "1.)*sqrt(min(dot(l,l),dot(f,f)));"
 "}"
 "float B(vec3 v,vec3 x)"
 "{"
   "v-=x;"
   "x=vec3(0,2,4.9)-x;"
   "return length(v-x*clamp(dot(v,x)/dot(x,x),0.,1.))-.2;"
 "}"
 "float I(vec3 v)"
 "{"
   "vec2 i=vec2(.14*w,.05);"
   "return length(vec2(length(v.xy)-i.x,v.z))-i.y;"
 "}"
 "float E(vec3 v,vec3 x)"
 "{"
   "float i=length(v/x);"
   "return i*(i-1.)/length(v/(x*x));"
 "}"
 "vec2 J(vec3 v)"
 "{"
   "v-=s;"
   "vec3 i=v;"
   "i.x+=cos(.775+t)*3.1*.2;"
   "i.y-=2.8;"
   "i.zy=F(.7)*i.zy;"
   "float x=E(i-vec3(0,.3,0),vec3(1,.2+cos(i.x*150.)*sin(i.z*150.)*.05,1)*.25);"
   "if(x<5.)"
     "{"
       "vec2 y=vec2(x,8);"
       "vec3 f=i;"
       "float m=C*.2,c=atan(f.z,f.x),s=length(f.xz);"
       "c=mod(c-m/2.,m)-m/2.;"
       "f.xz=vec2(cos(c),sin(c))*s;"
       "m=E(f-vec3(.5,.2+sin(f.x*2.)*.2,0),vec3(2,.1+sin(f.z*40.)*.02,.75)*.25);"
       "if(m<y.x)"
         "y=vec2(m,9);"
       "m=max(length(v.xz+vec2(cos(v.y*.25+t)*v.y*.2+.02,-.1))-smoothstep(3.1,0.,v.y)*.05-.02,v.y-3.1);"
       "if(m<y.x)"
         "y=vec2(m,10);"
       "return y;"
     "}"
   "return vec2(9e7,0);"
 "}"
 "float B(float v,float i,float x)"
 "{"
   "float y=clamp(.5+.5*(i-v)/x,0.,1.);"
   "return mix(i,v,y)-x*y*(1.-y);"
 "}"
 "float E(float v,float x,float i)"
 "{"
   "i*=1.4;"
   "float y=max(i-abs(v-x),0.);"
   "return max(v,x)+y*y*y/(6.*i*i);"
 "}"
 "vec2 K(vec3 v)"
 "{"
   "v-=m;"
   "v.y-=1.;"
   "v.z-=-2.;"
   "float x=t*f.x;"
   "vec3 y=vec3(cos(x*C),cos(x*C*2.)*.1,0)*.025*i.x;"
   "x=length(v*vec3(1,1,.825)-vec3(0,1.5,2.55)-y)-2.;"
   "if(x<3.)"
     "{"
       "float m=pow(B((v-y+vec3(.05,0,.5))*2.)*.5+.5,.75)*2.-1.;"
       "x=x+.05-m*.2;"
       "m=mod(t*f.x,2.);"
       "float c=smoothstep(0.,.5,m),l=smoothstep(.5,1.,m),s=smoothstep(1.,1.5,m),a=smoothstep(1.5,2.,m);"
       "vec4 g=vec4(l*(1.-l),a*(1.-a),c*(1.-c),s*(1.-s)),n=(m*.5-vec4(l,a,c,s))*i.x;"
       "vec3 o=v;"
       "o.x-=.8;"
       "o.z-=2.+n.x;"
       "o.yz=F(g.x)*o.yz;"
       "c=A(o-vec3(0),.7,.3,.2);"
       "l=A(o-vec3(0,-.8,0),.2,.35,.3);"
       "o=v;"
       "o.x+=1.;"
       "o.z-=2.+n.y;"
       "o.yz=F(g.y)*o.yz;"
       "c=min(c,A(o-vec3(0),.7,.3,.2));"
       "l=min(l,A(o-vec3(0,-.8,0),.2,.35,.3));"
       "o=v;"
       "o.x-=1.;"
       "o.z-=4.+n.z;"
       "o.yz=F(g.z)*o.yz;"
       "c=min(c,A(o-vec3(0),.7,.3,.2));"
       "l=min(l,A(o-vec3(0,-.8,0),.2,.35,.3));"
       "o=v;"
       "o.x+=1.;"
       "o.z-=4.+n.w;"
       "o.yz=F(g.w)*o.yz;"
       "c=min(c,A(o-vec3(0),.7,.3,.2));"
       "l=min(l,A(o-vec3(0,-.8,0),.2,.35,.3));"
       "o=v+vec3(0,-2,-1.2);"
       "o.xz=F((smoothstep(0.,1.,abs(mod(t,1.)*2.-1.))*f.y-.5)*.25*i.y+e.x)*o.xz;"
       "o.zy=F(sin(t*f.y)*.25*i.y-e.y)*o.zy;"
       "s=B(length(o-vec3(0,-1.3,-1.2))-1.,length(o-vec3(0))-.5,1.8);"
       "vec3 z;"
       "a=B(length(o-vec3(0,.35,-.1))-.55-(cos(o.z*8.+o.y*4.5+o.x*4.)+cos(o.z*4.+o.y*6.5+o.x*8.))*.05,x,.1);"
       "z=o;"
       "z.yz=F(-.6)*z.yz;"
       "z.x=abs(v.x)-.8;"
       "z*=vec3(.3,1,.4);"
       "z-=vec3(0,-.05-pow(z.x,2.)*5.,-.1);"
       "m=E(length(z)-.15,-length(z-vec3(0,-.1,0))+.12,.01);"
       "z.y*=.3;"
       "z.y-=-.11;"
       "float M=length(z)-.16;"
       "z=o;"
       "z.x=abs(o.x)-.4;"
       "float r=length(z*vec3(1,1,1.-p)-vec3(0,0,-1))-.3,u=B(E(abs(r)-.01,B(-abs(o.y+o.z*.025)+.25-smoothstep(.95,.96,d)*.3+cos(t)*.02,-o.z-1.-p*1.8,.2),.01),s,.02);"
       "s=min(s,u);"
       "z.x=abs(o.x)-.2;"
       "z.xz=F(-.45)*z.xz;"
       "s=B(E(s,-length(z-vec3(-.7,-1.2,-2.05))+.14*w,.1),I(z-vec3(-.7,-1.2,-1.94)),.05);"
       "u=B(x,B(v-vec3(0,-.1,cos(v.y-.7)*.5),vec3(cos(t*f.z)*i.z,.2,5))-(cos(v.z*8.+v.y*4.5+v.x*4.)+cos(v.z*4.+v.y*6.5+v.x*3.))*.02,.1);"
       "vec2 U=h(h(vec2(x,1),vec2(u,1)),vec2(a,1));"
       "U.x=E(U.x,-M,.15);"
       "U=h(h(h(h(h(U,vec2(c,2)),vec2(s,2)),vec2(r,3)),vec2(l,4)),vec2(m,2));"
       "D=s;"
       "return U;"
     "}"
   "return vec2(x,1);"
 "}"
 "float F(vec3 v,vec2 i,float x)"
 "{"
   "return max(abs(v.z)-i.y,E(E(v.x*.9+v.y*.5,-v.x*.9+v.y*.5,x),-v.y,x)-i.x*.5);"
 "}"
 "vec2 L(vec3 v)"
 "{"
   "v-=x;"
   "float i=F(v-vec3(0,7.5,-5),vec2(1.7,.1),.3);"
   "if(i<8.)"
     "{"
       "i=E(i,-F(v-vec3(0,7.5,-5.1),vec2(1.6,.1),.3),.001);"
       "float x=A(v-vec3(0,4,-5.1),vec3(.11,4,.08));"
       "vec3 o=v;"
       "o.y=abs(o.y-7.3)-.3;"
       "x=min(x,A(o-vec3(0,0,-5.05),vec3(.35,.1,.05)));"
       "vec2 y=vec2(x,5);"
       "return h(y,vec2(i,6));"
     "}"
   "return vec2(9e7,0);"
 "}"
 "vec2 M(vec3 v)"
 "{"
   "return h(h(h(h(h(h(vec2(v.y,0),K(v)),J(v)),H(v)),L(v)),G(v)),A(v));"
 "}"
 "float B(vec3 v,vec3 x,float i,float y)"
 "{"
   "float m=.5*i-M(v+x*i*.5).x;"
   "i=.95*(i-M(v+x*i).x);"
   "return clamp(1.-y*1.5*(m+i),0.,1.);"
 "}"
 "float F(vec3 v,vec3 x)"
 "{"
   "float i=.01;"
   "for(int f=0;f<128;f++)"
     "{"
       "float m=M(v+x*i).x;"
       "i+=m;"
       "if(i>1e2||abs(m)<.001)"
         "break;"
     "}"
   "return i;"
 "}"
 "float N(vec3 v)"
 "{"
   "vec3 i=r;"
   "float x=1.,f=.08;"
   "for(int y=0;y<64;y++)"
     "{"
       "float m=M(v+i*f).x;"
       "x=min(x,30.*m/f);"
       "f+=m;"
       "if(x<1e-4||f>50.)"
         "break;"
     "}"
   "return clamp(x,0.,1.);"
 "}"
 "float E(vec2 v,float i,float x,float y)"
 "{"
   "v.x=abs(v.x);"
   "float m=(i-x)/y,c=sqrt(1.-m*m),f=dot(v,vec2(-m,c));"
   "return f<0.?"
     "length(v)-i:"
     "f>c*y?"
       "length(v-vec2(0,y))-x:"
       "dot(v,vec2(c,m))-i;"
 "}"
 "float G(vec2 v,float x)"
 "{"
   "vec2 i=vec2(.81,-.59),y=vec2(-i.x,i.y);"
   "v.x=abs(v.x);"
   "v-=2.*max(dot(i,v),0.)*i;"
   "v-=2.*max(dot(y,v),0.)*y;"
   "v.x=abs(v.x);"
   "v.y-=x;"
   "y=.5*vec2(-i.y,i)-vec2(0,1);"
   "float m=clamp(dot(v,y)/dot(y,y),0.,x);"
   "return length(v-y*m)*sign(v.y*y.x-v.x*y.y);"
 "}"
 "void main()"
 "{"
   "vec2 v=gl_FragCoord.xy/g,i=v*2.-1.;"
   "i.x*=g.x/g.y;"
   "vec3 m=c,f=E(m)*normalize(vec3(i,o-length(i)*u));"
   "float l=F(m,f);"
   "vec3 z=m+f*l;"
   "vec2 e=M(z),d=vec2(1e-4,0);"
   "vec3 w=normalize(vec3(e.x-M(z-d.xyy).x,e.x-M(z-d.yxy).x,e.x-M(z-d.yyx).x));"
   "float C=smoothstep(0.,.3,r.y)+.1,H=B(z,w,.15,1.)*B(z,w,1.,.1)*.5,I=N(z),k=1.+dot(f,w);"
   "vec3 J=vec3(1,.8,.7)*max(dot(w,r),0.)*pow(vec3(I),vec3(1,1.2,1.5)),K=vec3(1,.8,.7)*.1*max(dot(w,-r),0.)*H,L=vec3(.5)*mix(B(z,f,.3,.75),B(z,r,.3,.75),.5),O=vec3(1)*max(dot(reflect(f,w),r),0.),P=vec3(0),Q=vec3(.4,.45,.5)*H,R=vec3(0),b=vec3(0);"
   "if(e.y==0.)"
     "b=vec3(3),L*=0.,O*=0.;"
   "else if(e.y==1.)"
     "b=vec3(.4),L*=k*.5+.5,R=vec3(.35),O=pow(O,vec3(4))*k*.25;"
   "else if(e.y==4.)"
     "b=vec3(.025),L*=0.,O=pow(O,vec3(80))*k*10.;"
   "else if(e.y==3.)"
     "{"
       "L*=.5;"
       "vec3 v=normalize(a+(B(vec3(t,t*.5,t*1.5))*2.-1.)*.01),i=cross(v,vec3(0,1,0)),x=cross(v,i);"
       "i=cross(x,v);"
       "v=w.z*v+w.x*i+w.y*x;"
       "i=f.z*a+f.x*i+f.y*x;"
       "vec2 y=i.xy/i.z*length(v.xy)/length(m-z)*.4;"
       "v.xy-=y*smoothstep(.01,0.,dot(v,f));"
       "float c=.2+p*.5,l=length(v.xy),s=atan(v.x,v.y);"
       "x=mix(vec3(.5,.3,.1),vec3(0,.8,1),smoothstep(.16,.3,l)*.3+cos(s*15.)*.04);"
       "c=smoothstep(c,c+.02,l);"
       "b=mix(x*.3,mix(x*((smoothstep(-.9,1.,B(vec3(l*10.,s*30.+cos(l*50.+B(vec3(s))*50.),0)))+smoothstep(-.9,1.,B(vec3(l*10.,s*40.+cos(l*30.+B(vec3(s))*50.)*2.,0))))*.5+.5)*smoothstep(.3,.29,l)*(vec3(1,.8,.7)*pow(max(0.,dot(normalize(vec3(3,1,-1)),v)),8.)*3e2+.5)*c+pow(O,vec3(800))*3,vec3(.8),smoothstep(.29,.3,l)),smoothstep(0.,.05,abs(l-.3)+.01));"
       "w=mix(normalize(w+(a+w)*4.),w,smoothstep(.3,.32,l));"
       "{"
         "vec3 o=normalize(vec3(1,1.5,-1)),g=vec3(-o.x,o.y*.5,o.z);"
         "P=(mix(mix(vec3(.3,.3,0),vec3(.1),smoothstep(-.7,.2,i.y)),vec3(.3,.65,1),smoothstep(0.,1.,i.y))+(h(i,o,.1)+h(i,g,2.)*.1+h(i,normalize(o+vec3(.2,0,0)),.3)+h(i,normalize(o+vec3(.2,0,.2)),.5)+h(i,normalize(g+vec3(.1,0,.2)),8.)*.5)*vec3(1,.9,.8))*mix(.15,.2,c)*sqrt(k)*2.5;"
       "}"
       "M(z);"
       "b*=smoothstep(0.,.015,D)*.4+.6;"
       "O*=0.;"
     "}"
   "else if(e.y==5.)"
     "b=vec3(.85,.95,1),L*=0.,O=pow(O,vec3(8))*k*2.;"
   "else if(e.y==6.)"
     "{"
       "vec3 y=z-x;"
       "L*=0.;"
       "O=pow(O,vec3(8))*k*20.;"
       "b=w.z>.5?"
         "mix(mix(vec3(1.5,0,0),vec3(2),smoothstep(.005,0.,F(y-vec3(0,7.5,-5),vec2(1.3,.2),.01))),vec3(0),smoothstep(.13,.1295,length(y-vec3(0,7.1,-4.9)))+smoothstep(.005,0.,E(y.xy-vec2(0,7.34),.06,.14,1.))):"
         "vec3(.85,.95,1);"
     "}"
   "else if(e.y==7.)"
     "{"
       "vec3 o=z-y;"
       "L*=0.;"
       "O=pow(O,vec3(8))*k*10.;"
       "if(w.z>.5)"
         "{"
           "b=vec3(0,0,1.5);"
           "o.y-=7.4;"
           "float x=A(o-vec3(0,.1,-5),vec3(.8,.8,1)),m=0.;"
           "o.xy=F(.8)*o.xy;"
           "m=(m+smoothstep(.01,0.,E(o.xy-vec2(-.04,-.6),.1,.05,1.))+smoothstep(.01,0.,E(o.xy-vec2(-.04,.5),.16,.135,.15)))*smoothstep(0.,.01,E(o.xy-vec2(-.12,.56),.001,.02,.2))*smoothstep(0.,.01,E(o.xy-vec2(0,.56),.001,.02,.2));"
           "o.xy=F(-1.6)*o.xy;"
           "m=m+smoothstep(.01,0.,E(o.xy-vec2(.04,-.6),.1,.05,1.))+smoothstep(.01,0.,E(o.xy-vec2(.04,.5),.16,.1,.15));"
           "b=mix(mix(b,vec3(2),smoothstep(.01,0.,x)),vec3(0),m);"
         "}"
       "else"
         " b=vec3(1);"
     "}"
   "else if(e.y==8.)"
     "{"
       "vec3 o=z-s;"
       "o.x+=cos(.775+t)*3.1*.2;"
       "o.y-=2.8;"
       "o.zy=F(.75)*o.zy;"
       "b=mix(vec3(2,.75,0),vec3(2,2,0),smoothstep(0.,.45,length(o-vec3(0,.3,0))))*1.8;"
       "L=vec3(.01);"
       "O*=0.;"
     "}"
   "else if(e.y==10.)"
     "b=vec3(0,.05,0),O*=k;"
   "else if(e.y==9.)"
     "{"
       "vec3 o=z-s;"
       "o.x+=cos(.775+t)*3.1*.2;"
       "o.y-=2.8;"
       "o.zy=F(.75)*o.zy;"
       "b=mix(vec3(1)+.5,vec3(.75,.5,1),smoothstep(.5,1.1,length(o-vec3(0,.3,0))))*2.;"
       "L*=0.;"
       "O=pow(O,vec3(4))*k;"
     "}"
   "else if(e.y==11.)"
     "b=vec3(1),J*=vec3(.1)*k,Q*=vec3(.1)*k,K*=0.,L*=0.,O=pow(O,vec3(100))*k*2.;"
   "else if(e.y==12.)"
     "b=vec3(1,.01,.01)*.3,J*=vec3(3),Q*=vec3(2)*k*k,L*=0.,O=vec3(1,.3,.3)*pow(O,vec3(500))*5.;"
   "else if(e.y==2.)"
     "b=vec3(1,.7,.5),Q*=vec3(1,.75,.75),L=pow(L,vec3(.5,2.5,5)+2.)*2.,O=pow(O,vec3(4))*k*.02;"
   "b=clamp(mix((b*(Q+J*.5+K*2.+L*2.)+P+O*I+R)*C,A(f,i,C),smoothstep(90.,1e2,l)),0.,1.);"
   "if(e.y==0.)"
     "{"
       "float v=length(i)*.5,x=cos(atan(i.x,i.y)*15.-t*3.-v*30.*n.y);"
       "b=mix(b,mix(mix(vec3(1,.5,0),vec3(.8,.5,1),(cos(v*5.+t*5.)*.5+.5)*n.y),vec3(1),smoothstep(-v,v,x)),n.x);"
     "}"
   "e=F(t*5.)*vec2(abs(i.x*5.-.35)-1.8,i.y*5.-1.4);"
   "C=(1.4+.2*sin(t*20.))*smoothstep(.5,1.,n.x);"
   "b=pow(pow(mix(b,mix(vec3(1,.6,0),vec3(1,.2,0),smoothstep(-.1,.6,G(e,C*.5)))*1.3,smoothstep(0.,-.01,G(e,C))*n.x),vec3(1./2.2)),vec3(1,1.05,1.1));"
   "C=length(gl_FragCoord.xy/g.xx-vec2(.5,.3));"
   "H=max(.137,smoothstep(147.,146.,t));"
   "b*=smoothstep(H,H-.005,C);"
   "H=fract(23.*pow(C,.25));"
   "H-=smoothstep(.95,.99,H);"
   "b=smoothstep(0.,8.,t)*smoothstep(153.,150.,t)*mix(b,mix(vec3(1,.6,0),vec3(1,0,0),H),smoothstep(.135,.136,C)*smoothstep(147.,148.,t));"
   "U=vec4(b/(1.+pow(length(v*2.-1.),4.)*.04),1);"
 "}";

const char *fxaa_frag =
 "#version 150\n"
 "out vec4 U;"
 "const vec2 b=vec2(1920,1080);"
 "uniform sampler2D O;"
 "void main()"
 "{"
   "vec2 v=1./b,i=gl_FragCoord.xy*v;"
   "vec4 o=vec4(i,i-v*.5);"
   "vec3 x=vec3(.299,.587,.114);"
   "float y=dot(textureLod(O,o.zw,0.).xyz,x),m=dot(textureLod(O,o.zw+vec2(1,0)*v.xy,0.).xyz,x),c=dot(textureLod(O,o.zw+vec2(0,1)*v.xy,0.).xyz,x),s=dot(textureLod(O,o.zw+vec2(1)*v.xy,0.).xyz,x),f=dot(textureLod(O,o.xy,0.).xyz,x);"
   "i=vec2(-y-m+c+s,y+c-m-s);"
   "float l=1./(min(abs(i.x),abs(i.y))+1./128.);"
   "i=min(vec2(8),max(vec2(-8),i*l))*v.xy;"
   "vec3 z=.5*(textureLod(O,o.xy+i*(1./3.-.5),0.).xyz+textureLod(O,o.xy+i*(2./3.-.5),0.).xyz),a=z*.5+.25*(textureLod(O,o.xy+i*-.5,0.).xyz+textureLod(O,o.xy+i*.5,0.).xyz);"
   "l=dot(a,x);"
   "U=l<min(f,min(min(y,m),min(c,s)))||l>max(f,max(max(y,m),max(c,s)))?"
     "vec4(z,1):"
     "vec4(a,1);"
 "}";

#endif // MOUTON_EXPECTED_
